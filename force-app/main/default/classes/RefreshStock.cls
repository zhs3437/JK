global class RefreshStock {
     webService static String clickUpdate(String oppid){
	List<jinkosolarComEccStockResult.IT_OP_element> jitL =new List<jinkosolarComEccStockResult.IT_OP_element>();
    jinkosolarComEccStockResult.IT_OP_element jits = new jinkosolarComEccStockResult.IT_OP_element();
       Opportunity   opp = Database.query(UtilClass.MakeSelectSql(Schema.SObjectType.Opportunity) + ' ' +
                                               'Where  id =: oppid'); 
         oppid =opp.id;
          List<order> ord = Database.query(UtilClass.MakeSelectSql(Schema.SObjectType.order) + ' ' +
                                               'Where  Opportunity__c =: oppid');   
        List<contract> con = Database.query(UtilClass.MakeSelectSql(Schema.SObjectType.Contract) + ' ' +
                                               'Where  Opportunity__c =: oppid');  
    jits.ZOPID =oppid;
         jitL.add(jits);
         jinkosolarComEccStockResult.HTTPS_Port hp =new jinkosolarComEccStockResult.HTTPS_Port();
         jinkosolarComEccStockResult.DT_StockResult_Response response = new jinkosolarComEccStockResult.DT_StockResult_Response();
        
         response = hp.SI_CRM2ECC_StockResult_Out('','','','','','','',jitL);
        
         List<jinkosolarComEccStockResult.ET_RESULT_element> jet =new List<jinkosolarComEccStockResult.ET_RESULT_element>();
        if(Test.isRunningTest()){
         response.ET_RESULT =new list<jinkosolarComEccStockResult.ET_RESULT_element>();
        }
                system.debug('预订结果返回值:'+response.E_MSGTY);
          system.debug('预订结果返回值:'+response.E_MSGTXT);
         jet=response.ET_RESULT; 
             
          List<Reserve_inventory_information__c> deleteRiiLst =new  List<Reserve_inventory_information__c>();
         deleteRiiLst = Database.query(UtilClass.MakeSelectSql(Schema.SObjectType.Reserve_inventory_information__c) + ' ' +
                                               'Where  ZOPID__c =: oppid'); 
           List<Reserve_inventory_information__c> RiiLst =new  List<Reserve_inventory_information__c>();
         IF(response.E_MSGTY=='S'){
         for(jinkosolarComEccStockResult.ET_RESULT_element st:jet){
          Reserve_inventory_information__c Rii =new Reserve_inventory_information__c();
            Rii.ZBOOKYEAR__c = st.ZBOOKYEAR;
            Rii.ZBOOKID__c = st.ZBOOKID;
            Rii.Num__c = decimal.valueOf(st.ZSERNO);
            Rii.ZSYSID__c = st.ZSYSID;
            Rii.ZOPID__c = st.ZOPID;
            Rii.ZOBJID__c = st.ZOBJID;
            Rii.ZSTOTY__c = st.ZSTOTY;
            Rii.ZOPENFLAG__c = st.ZOPENFLAG;
            Rii.MATNR__c = st.MATNR;
            Rii.MAKTX__c = st.MAKTX;
            Rii.WERKS__c = st.WERKS;
            Rii.ZLGOGRP__c = st.ZLGOGRP;
            Rii.ZGDD__c = st.ZGDD;
            Rii.ZDELQTY__c = st.ZDELQTY.substring(0, st.ZDELQTY.indexOf('.'));
            Rii.ZBOOKQTY__c = st.ZBOOKQTY.substring(0, st.ZBOOKQTY.indexOf('.'));
            Rii.MEINS__c = st.MEINS;
            Rii.ZZHHRQ__c = st.ZZHHRQ;
            Rii.ZZLCRQ__c = st.ZZLCRQ;
            Rii.BLNO__c = st.BLNO;
            Rii.ZETD__c = st.ZETD;
            Rii.ZETA__c = st.ZETA;
            Rii.ZWARNDATE__c = st.ZWARNDATE;
            Rii.ZDUEDATE__c = st.ZDUEDATE;
            Rii.ZSFHWBH__c = st.ZSFHWBH;
            Rii.S01__c = st.S01;
            Rii.S41__c = st.S41;
            Rii.S42__c = st.S42;
            Rii.S44__c = st.S44;
            Rii.S47__c =st.S47;
            Rii.S49__c =st.S49;
            Rii.S4B__c =st.S4B;
            Rii.P43__c =st.P43;
            Rii.P44__c =st.P44;
            Rii.P45__c =st.P45;
            Rii.P47__c =st.P47;
            Rii.P48__c =st.P48;
            Rii.P4A__c =st.P4A;
            Rii.P4G__c =st.P4G;
            Rii.P4H__c =st.P4H;
            Rii.P4I__c =st.P4I;
            Rii.P4J__c =st.P4J;
            Rii.P4K__c =st.P4K;
            Rii.P4L__c =st.P4L;
            Rii.ZMS1__c =st.ZMS1;
            Rii.ZJXHJT__c =st.ZJXHJT;
            Rii.ZJXHDLCD__c =st.ZJXHDLCD;
            Rii.ZLRF__c =st.ZLRF;
            Rii.ZEVA__c =st.ZEVA;
            Rii.ZZJ__c =st.ZZJ;
            Rii.ZBZ__c =st.ZBZ;
            Rii.ZCPHGZ__c =st.ZCPHGZ;
            Rii.ZFJZS__c =st.ZFJZS;
            Rii.ZQYQZXRZ__c =st.ZQYQZXRZ;
            Rii.ZJXHPP__c =st.ZJXHPP;
            Rii.ZBB__c =st.ZBB;
            Rii.ZBL__c =st.ZBL;
            Rii.ZMP__c =st.ZMP;
            Rii.ZDQPX__c =st.ZDQPX;
            Rii.ZYSPXYS__c =st.ZYSPXYS;
            
            Rii.S01T__c = st.S01T;
            Rii.S41T__c = st.S41T;
            Rii.S42T__c = st.S42T;
            Rii.S44T__c = st.S44T;
            Rii.S47T__c =st.S47T;
            Rii.S49T__c =st.S49T;
            Rii.S4BT__c =st.S4BT;
            Rii.P43T__c =st.P43T;
            Rii.P44T__c =st.P44T;
            Rii.P45T__c =st.P45T;
            Rii.P47T__c =st.P47T;
            Rii.P48T__c =st.P48T;
            Rii.P4AT__c =st.P4AT;
            Rii.P4GT__c =st.P4GT;
            Rii.P4HT__c =st.P4HT;
            Rii.P4IT__c =st.P4IT;
            Rii.P4JT__c =st.P4JT;
            Rii.ZMS1T__c =st.ZMS1T;
            Rii.ZJXHJTT__c =st.ZJXHJTT;
            Rii.ZJXHDLCDT__c =st.ZJXHDLCDT;
            Rii.ZLRFT__c =st.ZLRFT;
            Rii.ZEVAT__c =st.ZEVAT;
            Rii.ZZJT__c =st.ZZJT;
            Rii.ZBZT__c =st.ZBZT;
            Rii.ZCPHGZT__c =st.ZCPHGZT;
            Rii.ZFJZST__c =st.ZFJZST;
            Rii.ZQYQZXRZT__c =st.ZQYQZXRZT;
            Rii.ZJXHPPT__c =st.ZJXHPPT;
            Rii.ZBBT__c =st.ZBBT;
            Rii.ZBLT__c =st.ZBLT;
            Rii.ZMPT__c =st.ZMPT;
            Rii.ZDQPXT__c =st.ZDQPXT;
            Rii.ZYSPXYST__c =st.ZYSPXYST;
            Rii.ZCRMORIT__c =st.ZCRMORIT;
            Rii.Opportunity__c =oppid;
            if(con.size()>0){
             Rii.contract__c=con[0].id;
                }
             if(ord.size()>0){
             Rii.order__c=ord[0].id;
                 }

                 
            RiiLst.add(Rii);
             }
         delete deleteRiiLst;
         upsert RiiLst;
             }
         return 'S';
     }
    webService static void tool(){
          integer num=1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
          num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;

        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
        num=num+1;
    }
    
}